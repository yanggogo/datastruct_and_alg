# C字节对齐

## 自然对齐

char 自然对齐的长度为1字节
short 为2字节
int 为4字节
double 为8字节

结构体或类的对齐为其成员中最大的那个值

## 指定对齐

#pragma pack(n)
#pragma pack()

## 生效对齐

自然对齐和指定对齐的最小值

## 实践

```c
typedef struct Data {
    char a;
    short b;
    int c;
    double d;
} Data_t;

// sizeof(Data_t) = 2 + 2 + 4 + 8 = 16
```

```c
#pragma pack(1)
typedef struct Data {
    char a;
    short b;
    int c;
    double d;
} Data_t;
#pragma pack()

// sizeof(Data_t) = 1 + 2 + 4 + 8 = 15
```

```c
#pragma pack(2)
typedef struct Data {
    char a;
    short b;
    int c;
    double d;
} Data_t;
#pragma pack()

// sizeof(Data_t) = 2 + 2 + 4 + 8 = 16
```

```c
#pragma pack(4)
typedef struct Data {
    char a;
    short b;
    int c;
    double d;
} Data_t;
#pragma pack()

// sizeof(Data_t) = 2 + 2 + 4 + 8 = 16
```
